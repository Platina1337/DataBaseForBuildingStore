# README.md


## База данных для интернет-магазина по продаже стройматериалов

Данная база данных разработана для управления заказами в интернет-магазине. Она включает таблицы для пользователей, категорий продуктов, продуктов, корзины и заказов. Система поддерживает различные бизнес-процессы, такие как управление пользователями и ролями, добавление продуктов, создание заказов и управление запасами.

## Назначение

Основное назначение данной базы данных - обеспечивать хранение и управление информацией о продуктах, пользователях и заказах интернет-магазина, а также поддерживать выполнение ключевых бизнес-процессов, связанных с этими данными.

## Структура базы данных

### Таблицы

- **user**: Хранит информацию о пользователях (идентификатор, имя пользователя, пароль, роль).
- **category**: Хранит категории продуктов.
- **product**: Хранит информацию о продуктах (идентификатор, название, описание, цена, количество на складе, категория, продавец).
- **cart**: Хранит информацию о товарах в корзине пользователей.
- **order**: Хранит информацию о заказах (идентификатор, пользователь, общая сумма, статус, дата заказа).
- **order_detail**: Хранит детали заказов (идентификатор, заказ, продукт, количество, цена).

### Роли

- **Администратор**: Управляет всеми аспектами системы.
- **Продавец**: Может добавлять и управлять продуктами.
- **Покупатель**: Может просматривать и заказывать продукты.


### Типовые запросы

1. **Получение всех продуктов категории**:
    ```sql
    SELECT p.name, p.description, p.price
    FROM product p
    JOIN category c ON p.category_id = c.category_id
    WHERE c.name = 'инструменты';
    ```

2. **Получение всех заказов пользователя**:
    ```sql
    SELECT o.order_id, o.total_amount, o.order_status, o.order_date
    FROM `order` o
    WHERE o.user_id = 2;
    ```

3. **Получение деталей конкретного заказа**:
    ```sql
    SELECT od.product_id, od.quantity, od.price
    FROM order_detail od
    WHERE od.order_id = 1;
    ```

4. **Получение всех продуктов продавца**:
    ```sql
    SELECT p.product_id, p.name, p.description, p.price
    FROM product p
    JOIN user u ON p.seller_id = u.user_id
    WHERE u.role = 'seller' AND u.user_id = 3;
    ```

5. **Обновление статуса заказа**:
    ```sql
    UPDATE `order`
    SET order_status = 'paid'
    WHERE order_id = 1;
    ```
    
## Установка MySQL и импорт дампа базы данных

### Установка MySQL

1. **Скачивание и установка MySQL:**
    - Перейдите на [официальный сайт MySQL](https://dev.mysql.com/downloads/installer/) и скачайте MySQL Installer.
    - Запустите установщик и следуйте инструкциям на экране, чтобы установить MySQL Server и MySQL Workbench.

2. **Настройка MySQL Server:**
    - Во время установки вам будет предложено настроить MySQL Server. Установите root пароль и запомните его, он понадобится для входа в систему.

**Импорт дампа базы данных:**
    - Откройте файл `mysql_backup.sql` из репозитория и скопируйте весь предоставленный код.
    - Запустите MySQL Workbench и подключитесь к вашему MySQL серверу, используя учетные данные, созданные во время установки.
    - Создайте новую базу данных:
      ```sql
      CREATE DATABASE buildingstore;
      ```
    - Выберите созданную базу данных, вставьте скопированный код из файла `mysql_backup.sql` в рабочую область и выполните его.

### Проверка импорта

После завершения импорта вы можете выполнить типовые запросы, чтобы убедиться, что данные были импортированы корректно. Для этого откройте новый SQL Query Tab в MySQL Workbench и выполните несколько запросов из списка выше.

## Требования

- MySQL Server 8.0 или выше
- MySQL Workbench для управления базой данных
- Дамп базы данных в формате `.sql`
- Поддержка кодировки UTF-8

## ERD-диаграмма

Файл с ERD-диаграммой, отражающей структуру базы данных и соответствующие связи, приложен к репозиторию.
